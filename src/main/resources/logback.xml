<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<appender name="FileAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>/data/daijia/server.log</file>
		<append>true</append>
		
		<!-- file size
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<fileNamePattern>${path}/logs/rocketmqlogs/otherdays/broker_default.%i.log.zip</fileNamePattern>
			<minIndex>1</minIndex>
			<maxIndex>10</maxIndex>
		</rollingPolicy>
		<triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
			<maxFileSize>1MB</maxFileSize>
		</triggeringPolicy>
		-->
		
		<!-- date
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">   
	      	<fileNamePattern>${path}/logs/rocketmqlogs/otherdays/broker_default.%d{yyyy-MM-dd}.log.zip</fileNamePattern>   
	      	<maxHistory>30</maxHistory>   
	    </rollingPolicy>
	    -->
	     
	    <!-- file size + date -->
	    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
	        <fileNamePattern>/data/daijia/otherdays/%d{yyyy-MM-dd}/server.%i.log.zip</fileNamePattern>
	        <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
	            <maxFileSize>100MB</maxFileSize>
	        </timeBasedFileNamingAndTriggeringPolicy>
	    </rollingPolicy>
		
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS,GMT+8} [%t] %p: %m [%F:%L]%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
	</appender>

	<appender name="Stdout" class="ch.qos.logback.core.ConsoleAppender">
		<append>true</append>
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS,GMT+8} [%t] %p: %m [%F:%L]%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
	</appender>

	<logger name="com.ly" additivity="false">
		<level value="INFO" />
		<appender-ref ref="Stdout" />
		<appender-ref ref="FileAppender" />
	</logger>

	<root>
		<level value="INFO" />
		<appender-ref ref="Stdout" />
		<appender-ref ref="FileAppender" />
	</root>
</configuration>